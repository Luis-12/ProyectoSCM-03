<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html >
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:h="http://java.sun.com/jsf/html"
	  xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
	  xmlns:p="http://primefaces.org/ui">

<h:head>

	<link href="css/style.css" rel="stylesheet" type="text/css" />
	<link href="//db.onlinewebfonts.com/c/f977213040abc486420980aae60e0db3?family=GestaW01-Medium" rel="stylesheet" type="text/css"/>
	<title>Ingresar</title>

</h:head>

<h:body >
	<div id="header">
		<div id="logo"></div>

	</div>

	<div id="top">
		<h:form>
			<p:commandButton action="index.xhtml?faces-redirect=true" style='float: left;' id="dynaButton" value="Regresar"  icon="ui-icon-home"/>
		</h:form>
	</div>

<center>
	<div class="login">
	<p:graphicImage url="/imagen/log.png" style="width: 150px"/>
	<center>
	<h:form id="AgregarColaborador">
		<p:growl id="msgs" showDetail="true" life="3000" ><p:autoUpdate/></p:growl>

		<h:panelGrid columns="2"  id="panel2">

			<p:outputLabel value="Usuario:" styleClass="required" indicateRequired="false" for="usuario"/>
			<p:inputText id="usuario" required="true"   requiredMessage="Ingrese su usuario" value="#{colaboradorBean.colaboradorlogueado.pk_idColaborador}">
				<f:ajax event="blur" execute="@this" render="idmessage" />
			</p:inputText>
			<p:watermark value="Usuario" for="usuario"/>
			<p:message id="idmessage" for="usuario"/>


			<p:outputLabel value="Contraseña:" styleClass="required" indicateRequired="false" for="contraseña"/>
			<p:password id="contraseña" required="true" requiredMessage="Ingrese la contraseña" value="#{colaboradorBean.colaboradorlogueado.clave}">
				<f:ajax event="blur" execute="@this" render="Nmessage" />
			</p:password>
			<p:watermark value="Contraseña" for="contraseña"/>
			<p:message id="Nmessage" for="contraseña"/>
		</h:panelGrid>
		<center>
			<p:commandButton value="Ingresar" action="#{colaboradorBean.doLogin}" style="margin-right:20px;margin-top: 20px"
							 styleClass="loginButton" />
		</center>
	</h:form>
	</center>
	</div>
</center>
	<p:dialog id="dlCC" header="Actualizar Clave de Usuario"  showEffect="fade" hideEffect="fade"
			  widgetVar="dlCC" modal="true" resizable="false" minWidth="450"  >
		<h:form id="ActualizarClave">
			<p:growl id="msgs5" showDetail="true" rendered="#{not facesContext.validationFailed}"/>
			<h:panelGrid columns="2"  id="panel5">

				<p:outputLabel value="Nueva contraseña:" styleClass="required" indicateRequired="true" for="contraseñaCC"/>
				<p:password id="contraseñaCC" required="true"
							value="#{colaboradorBean.colaboradorClave.clave}" feedback="true" weakLabel="Muy debil"
							goodLabel="Bien" strongLabel="Fuerte" promptLabel="Ingrese la nueva contraseña" match="contraseñaCCC"
							validatorMessage="Las contraseñas ingresadas no coinciden">
					<f:validateLength minimum="8"/>
				</p:password>
				<p:watermark value="Contraseña" for="contraseñaCC"/>
				<p:messages for="contraseñaCC"/>

				<p:outputLabel value="Confirmar contraseña:" styleClass="required" indicateRequired="true" for="contraseñaCCC"/>
				<p:password id="contraseñaCCC" required="true" requiredMessage="Confirme la nueva contraseña" value="#{colaboradorBean.colaboradorlogueado.clave}"
					validatorMessage="Minimo 8 Caracteres">
					<f:validateLength minimum="8"/>
				</p:password>
				<p:watermark value="Contraseña" for="contraseñaCCC"/>
				<p:messages for="contraseñaCCC"/>
			</h:panelGrid>
			<center>
				<p:commandButton value="Cambiar"
								 action="#{colaboradorBean.cambioClave}"
								 style="margin-right:20px;margin-top: 20px"
								 styleClass="ui-priority-primary"
								 update="panel5"/>
			</center>
		</h:form>
	</p:dialog>
	<div id="footer">
		<br/>
		<h:link outcome="acerca" value ="©"/>  SISTEMA CONTROL DE MARCAS WYNDHAM HERRADURA

	</div>
	<script type="text/javascript">
		function getJSFElementId(_tagName,_fieldName) {
			var elements = document.getElementsByTagName(_tagName);
			if (elements != null &amp;&amp; elements.length != 0) {
				for (i=0, x=elements.length; i &lt; x; i++) {
					var myid=elements[i].id+'#';
					if(myid.match(_fieldName+'#') != null) {
						return elements[i].id;
					}
				}
			}
			return 'NOID';
		}

	</script>
</h:body>
</html>