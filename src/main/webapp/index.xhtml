<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
<h:head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
    <link href="css/style.css" rel="stylesheet" type="text/css" />
    <link rel='stylesheet' media='screen and (max-device-width: 480px)' href='css/styleM.css' />
    <link href="//db.onlinewebfonts.com/c/f977213040abc486420980aae60e0db3?family=GestaW01-Medium" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="https://rawgit.com/schmich/instascan-builds/master/instascan.min.js" ></script>

    <title>Marca
    </title>
</h:head>

<div id="page">

    <h:body>
        <div id="header">
            <div id="logoP">
                <img srcset="imagen/logo.jpg 1535w, imagen/logR.PNG 480w"  src="imagen/logo.jpg" style="max-width: 43%; max-height: 77%;  padding: 10px; "></img>
            </div>
        </div>
        <div id="top">
            <h:form>
                <p:commandButton action="login.xhtml?faces-redirect=true" style='float: left;' id="dynaButton" value="Ingresar"  icon="ui-icon-home"/>
            </h:form>
        </div>

        <div style="text-align: left;margin-top: 50px">
                <p:outputLabel id="nom" value="#{colaboradorBean.colaboradorMarca.nombre}" />
                <p:outputLabel id="ced"  value="#{colaboradorBean.colaboradorMarca.pk_idColaborador}" />
        </div>

        <center>
        <div class="camara">
            <video  style="margin-bottom:10px; margin-left: 10px;margin-top: 10px" id="preview" width="350" autoplay="autoplay"/>
        </div>
        </center>
        <div>
            <h:form>
                <p:growl id="msgs" showDetail="true" life="3000" ><p:autoUpdate/></p:growl>
            <center>
                <h:panelGrid columns="3" cellpadding="5">
                    <p:commandButton styleClass="ui-commandant2" value="Entrada" actionListener="#{colaboradorBean.marcaEntrada}" />
                    <p:commandButton styleClass="ui-commandant2" value="Descanso"/>
                    <p:commandButton styleClass="ui-commandant2" value="Salida"/></h:panelGrid>
            </center>
            </h:form>
        </div>
        <h:form id="frm">
            <p:commandButton id="hdnBtn" actionListener="#{colaboradorBean.findColaboradorMarca}" update="frm,ced,nom" style="display: none"/>
            <p:inputText id="t1" value="#{colaboradorBean.colaboradorMarca.pk_idColaborador}" type="hidden" />
        </h:form>



        <div id="footer">
            <br/>
            <p:link outcome="acerca.xhtml" value="Â©"/>  <p:outputLabel  value=" SISTEMA CONTROL DE MARCAS WYNDHAM HERRADURA "/>

        </div>
<script type="text/javascript">

        scanner = new Instascan.Scanner(
            {
                video: document.getElementById("preview")
            }
        );
        scanner.addListener('scan', function (content) {
            if(content != null)
            {
                document.getElementById('frm'+':t1').value=content;
                document.getElementById('frm'+':hdnBtn').click();
            }

        });
        Instascan.Camera.getCameras().then(cameras =>
        {
            if (cameras.length > 0) {
                scanner.start(cameras[0]);
            } else {
                console.error("No existe camara o dispositivo!");
            }
        });
</script>

    </h:body>

</div>
</html>